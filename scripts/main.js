"use strict";!function(e){var n=function o(){return new o.init};n.prototype={renderTemplate:function(e,n,o){if(!$)throw"jQuery not loaded";if(!o)throw"Missing jQuery selector";var t=Mustache.render($(e).html(),n);return $(o).html(t),t},loadTemplate:function(e,n,o){var t=this,i=$.Deferred();if(!$)throw"jQuery not loaded";if(!o)throw"Missing jQuery selector";return $.get(e,function(e,a,r){t.renderTemplate(e,n,o),i.resolve(!0)}),i.promise()},appendConfirmationModal:function(e){if(!$)throw"jQuery not loaded";$("body").append('<div id=" '+e+'" class="modal"></div>')}},n.init=function(){},n.init.prototype=n.prototype,e.TemplateRender=e.TR$=n}(window),function(e){document.addEventListener("DOMContentLoaded",function(){var e,n,o=TemplateRender(),t="modal-confirmation";o.appendConfirmationModal(t);var i=function(){o.loadTemplate("templates/card-company.html",n,"#companies-list-section")};window.deleteCompany=function(i){console.log("deleteCompany-->",i);var a=$.grep(n.companies,function(e){return e.id==i});e=a[0];var r=o.loadTemplate("templates/confirmation.html",e,"#"+t);r.done(function(e){$("#modal-confirmation").openModal()})},window.modalConfirmation={agree:function(){console.log("deleting-->",e),n.companies=jQuery.grep(n.companies,function(n){return n.id!=e.id}),i(),$("#"+t).closeModal()},cancel:function(){$("#"+t).closeModal()}},$.getJSON("data/listing.json",{},function(e,o,t){n={companies:e},i()})})}(window);